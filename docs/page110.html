<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>sudoku GNPX5</title>


    <!-- Prism   https://prismjs.com/download.html -->
	<script src="prism_js_css/prism.js"></script>
	<link rel="stylesheet" href="prism_js_css/prism.css">


	<!-- jQuery treeview ! -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	<script src="jq_treeview/jquery.cookie.js"></script>
	<script src="jq_treeview/jquery.treeview.js"></script>
	<link   rel="stylesheet" href="jq_treeview/jquery.treeview.css" />
	<link   rel="stylesheet" href="jq_treeview/screen.css" />
	<script type="text/javascript" src="jq_treeview/cssFunction.js"></script>


	<link rel="stylesheet" href='css/style_v5_HeaderFooter.css'>
	<link rel="stylesheet" href="css/style_v5A_Standard.css">
	<link rel="stylesheet" href='css/gotoTop.css'>

	<script type="text/javascript" src="js/naviHeader.js"> </script>
	<script type="text/javascript" src="js/naviAlgorithm.js"> </script>
    
</head>

<body id="page0">
	<header id="head"> <strong><i>Sudoku Algorithm 5</i></strong>
        <script type="text/javascript"> writeNaviHeader(); </script>
	</header>

    SUDOKU_projet v5. beta 20240304k
<!--
    <section id="menuList">
        <script type="text/javascript"> writeNaviAlgorithm(); </script>
    </section>
-->
    
<!-- -------------------------------------------------------------------------- -->
    <article id="main">
        <section style="padding-top: 1.5em;">
            <h3 id="head_bg_LightBlue">Bit representations</h3>
            <p>
                GNPX ver5.0 uses a lot of Bit representations in analysis algorithms/codes.<br>
                Bit expression can express logic intuitively and easily.
                The occurrence of bugs has also been suppressed (probably).<br><br>
            </p>

            <h3 id="head_bg_LightBlue">(1)&nbsp;Operations</h3>
            <p>
                81 bits are required to represent the Sudoku board, so “UInt128” is used.
                The following functions are used for shorthand expressions.
                Instructions for use can be found in GNPX.

<pre class="line-numbers" class="prismOp" >
<code class="language-csharp">static public partial class GNPZExtender{
    static private readonly UInt128 _filter0081 = (UInt128.One&lt;&lt;81)-1;
    static private readonly UInt128 qZero = UInt128.Zero;
    static private readonly UInt128 qOne  = UInt128.One;
    static private readonly UInt128 _b9   = 0x1FF;

 // [att] UInt128: instance variable!  Original variable remains unchanged.
    static public UInt128 DifSet( this UInt128 A, UInt128 B ) => (UInt128)(A&(B^UInt128.MaxValue));

    static public UInt128 Set( this UInt128 A, int rc )       => A | qOne
    static public UInt128 Set( this UInt128 A, UInt128 B )    => A | B;

    static public UInt128 Reset( this UInt128 A, int rc )     => A & ((qOne&lt;&lt;rc)^UInt128.MaxValue);
    static public UInt128 Reset( this UInt128 A, UInt128 B )  => A & B^UInt128.MaxValue;

    static public bool IsHit( this UInt128 A, int rc )        => (A & (qOne&lt;&lt;rc)) != qZero;
    static public bool IsHit( this UInt128 A, UInt128 B )     => (A & B) != qZero;

    static public bool IsZero( this UInt128 A )               => (A == qZero);
    static public bool IsNotZero( this UInt128 A )            => (A != qZero);
}
</code></pre>	<br><br>
            </p>


            <h3 id="head_bg_LightBlue">(2)&nbsp;Constant</h3>
            <p>
                ConnectedCells81 and HouseCells81 are examples of the most basic constants used in the analysis algorithm.
            <ol>
                <li>ConnectedCells81<br>
                    ConnectedCells81 is a constant that represents cells connected to board 81 cells in bits.
                    The cells to be connected are found using the AND operation with the bit representation of the Sudoku problem.
<small><pre class="line-numbers" class="prismOp" > ConnectedCells81  ("."=0  Separated by 9,27 bits)
<code class="language-text">.11111111 111...... 111...... /1........ 1........ 1........ /1........ 1........ 1........
1.1111111 111...... 111...... /.1....... .1....... .1....... /.1....... .1....... .1.......
11.111111 111...... 111...... /..1...... ..1...... ..1...... /..1...... ..1...... ..1......
111.11111 ...111... ...111... /...1..... ...1..... ...1..... /...1..... ...1..... ...1.....
1111.1111 ...111... ...111... /....1.... ....1.... ....1.... /....1.... ....1.... ....1....
11111.111 ...111... ...111... /.....1... .....1... .....1... /.....1... .....1... .....1...
111111.11 ......111 ......111 /......1.. ......1.. ......1.. /......1.. ......1.. ......1..
1111111.1 ......111 ......111 /.......1. .......1. .......1. /.......1. .......1. .......1.
11111111. ......111 ......111 /........1 ........1 ........1 /........1 ........1 ........1
111...... .11111111 111...... /1........ 1........ 1........ /1........ 1........ 1........
111...... 1.1111111 111...... /.1....... .1....... .1....... /.1....... .1....... .1.......
111...... 11.111111 111...... /..1...... ..1...... ..1...... /..1...... ..1...... ..1......
...111... 111.11111 ...111... /...1..... ...1..... ...1..... /...1..... ...1..... ...1.....
...111... 1111.1111 ...111... /....1.... ....1.... ....1.... /....1.... ....1.... ....1....
...111... 11111.111 ...111... /.....1... .....1... .....1... /.....1... .....1... .....1...
......111 111111.11 ......111 /......1.. ......1.. ......1.. /......1.. ......1.. ......1..
......111 1111111.1 ......111 /.......1. .......1. .......1. /.......1. .......1. .......1.
......111 11111111. ......111 /........1 ........1 ........1 /........1 ........1 ........1
111...... 111...... .11111111 /1........ 1........ 1........ /1........ 1........ 1........
111...... 111...... 1.1111111 /.1....... .1....... .1....... /.1....... .1....... .1.......
111...... 111...... 11.111111 /..1...... ..1...... ..1...... /..1...... ..1...... ..1......
...111... ...111... 111.11111 /...1..... ...1..... ...1..... /...1..... ...1..... ...1.....
...111... ...111... 1111.1111 /....1.... ....1.... ....1.... /....1.... ....1.... ....1....
...111... ...111... 11111.111 /.....1... .....1... .....1... /.....1... .....1... .....1...
......111 ......111 111111.11 /......1.. ......1.. ......1.. /......1.. ......1.. ......1..
......111 ......111 1111111.1 /.......1. .......1. .......1. /.......1. .......1. .......1.
......111 ......111 11111111. /........1 ........1 ........1 /........1 ........1 ........1
1........ 1........ 1........ /.11111111 111...... 111...... /1........ 1........ 1........
.1....... .1....... .1....... /1.1111111 111...... 111...... /.1....... .1....... .1.......
..1...... ..1...... ..1...... /11.111111 111...... 111...... /..1...... ..1...... ..1......
...1..... ...1..... ...1..... /111.11111 ...111... ...111... /...1..... ...1..... ...1.....
....1.... ....1.... ....1.... /1111.1111 ...111... ...111... /....1.... ....1.... ....1....
.....1... .....1... .....1... /11111.111 ...111... ...111... /.....1... .....1... .....1...
......1.. ......1.. ......1.. /111111.11 ......111 ......111 /......1.. ......1.. ......1..
.......1. .......1. .......1. /1111111.1 ......111 ......111 /.......1. .......1. .......1.
........1 ........1 ........1 /11111111. ......111 ......111 /........1 ........1 ........1
1........ 1........ 1........ /111...... .11111111 111...... /1........ 1........ 1........
.1....... .1....... .1....... /111...... 1.1111111 111...... /.1....... .1....... .1.......
..1...... ..1...... ..1...... /111...... 11.111111 111...... /..1...... ..1...... ..1......
...1..... ...1..... ...1..... /...111... 111.11111 ...111... /...1..... ...1..... ...1.....
....1.... ....1.... ....1.... /...111... 1111.1111 ...111... /....1.... ....1.... ....1....
.....1... .....1... .....1... /...111... 11111.111 ...111... /.....1... .....1... .....1...
......1.. ......1.. ......1.. /......111 111111.11 ......111 /......1.. ......1.. ......1..
.......1. .......1. .......1. /......111 1111111.1 ......111 /.......1. .......1. .......1.
........1 ........1 ........1 /......111 11111111. ......111 /........1 ........1 ........1
1........ 1........ 1........ /111...... 111...... .11111111 /1........ 1........ 1........
.1....... .1....... .1....... /111...... 111...... 1.1111111 /.1....... .1....... .1.......
..1...... ..1...... ..1...... /111...... 111...... 11.111111 /..1...... ..1...... ..1......
...1..... ...1..... ...1..... /...111... ...111... 111.11111 /...1..... ...1..... ...1.....
....1.... ....1.... ....1.... /...111... ...111... 1111.1111 /....1.... ....1.... ....1....
.....1... .....1... .....1... /...111... ...111... 11111.111 /.....1... .....1... .....1...
......1.. ......1.. ......1.. /......111 ......111 111111.11 /......1.. ......1.. ......1..
.......1. .......1. .......1. /......111 ......111 1111111.1 /.......1. .......1. .......1.
........1 ........1 ........1 /......111 ......111 11111111. /........1 ........1 ........1
1........ 1........ 1........ /1........ 1........ 1........ /.11111111 111...... 111......
.1....... .1....... .1....... /.1....... .1....... .1....... /1.1111111 111...... 111......
..1...... ..1...... ..1...... /..1...... ..1...... ..1...... /11.111111 111...... 111......
...1..... ...1..... ...1..... /...1..... ...1..... ...1..... /111.11111 ...111... ...111...
....1.... ....1.... ....1.... /....1.... ....1.... ....1.... /1111.1111 ...111... ...111...
.....1... .....1... .....1... /.....1... .....1... .....1... /11111.111 ...111... ...111...
......1.. ......1.. ......1.. /......1.. ......1.. ......1.. /111111.11 ......111 ......111
.......1. .......1. .......1. /.......1. .......1. .......1. /1111111.1 ......111 ......111
........1 ........1 ........1 /........1 ........1 ........1 /11111111. ......111 ......111
1........ 1........ 1........ /1........ 1........ 1........ /111...... .11111111 111......
.1....... .1....... .1....... /.1....... .1....... .1....... /111...... 1.1111111 111......
..1...... ..1...... ..1...... /..1...... ..1...... ..1...... /111...... 11.111111 111......
...1..... ...1..... ...1..... /...1..... ...1..... ...1..... /...111... 111.11111 ...111...
....1.... ....1.... ....1.... /....1.... ....1.... ....1.... /...111... 1111.1111 ...111...
.....1... .....1... .....1... /.....1... .....1... .....1... /...111... 11111.111 ...111...
......1.. ......1.. ......1.. /......1.. ......1.. ......1.. /......111 111111.11 ......111
.......1. .......1. .......1. /.......1. .......1. .......1. /......111 1111111.1 ......111
........1 ........1 ........1 /........1 ........1 ........1 /......111 11111111. ......111
1........ 1........ 1........ /1........ 1........ 1........ /111...... 111...... .11111111
.1....... .1....... .1....... /.1....... .1....... .1....... /111...... 111...... 1.1111111
..1...... ..1...... ..1...... /..1...... ..1...... ..1...... /111...... 111...... 11.111111
...1..... ...1..... ...1..... /...1..... ...1..... ...1..... /...111... ...111... 111.11111
....1.... ....1.... ....1.... /....1.... ....1.... ....1.... /...111... ...111... 1111.1111
.....1... .....1... .....1... /.....1... .....1... .....1... /...111... ...111... 11111.111
......1.. ......1.. ......1.. /......1.. ......1.. ......1.. /......111 ......111 111111.11
.......1. .......1. .......1. /.......1. .......1. .......1. /......111 ......111 1111111.1
........1 ........1 ........1 /........1 ........1 ........1 /......111 ......111 11111111.
</code></pre></small>
</li><br>

<li> HouseCells81<br>
    A constant representing "cell belonging to house". The order is row house, column house, block house.
<small>
<pre class="line-numbers" class="prismOp" > HouseCells81  ("."=0  Separated by 9,27 bits)
<code class="language-text">111111111 ......... ......... /......... ......... ......... /......... ......... .........
......... 111111111 ......... /......... ......... ......... /......... ......... .........
......... ......... 111111111 /......... ......... ......... /......... ......... .........
......... ......... ......... /111111111 ......... ......... /......... ......... .........
......... ......... ......... /......... 111111111 ......... /......... ......... .........
......... ......... ......... /......... ......... 111111111 /......... ......... .........
......... ......... ......... /......... ......... ......... /111111111 ......... .........
......... ......... ......... /......... ......... ......... /......... 111111111 .........
......... ......... ......... /......... ......... ......... /......... ......... 111111111
1........ 1........ 1........ /1........ 1........ 1........ /1........ 1........ 1........
.1....... .1....... .1....... /.1....... .1....... .1....... /.1....... .1....... .1.......
..1...... ..1...... ..1...... /..1...... ..1...... ..1...... /..1...... ..1...... ..1......
...1..... ...1..... ...1..... /...1..... ...1..... ...1..... /...1..... ...1..... ...1.....
....1.... ....1.... ....1.... /....1.... ....1.... ....1.... /....1.... ....1.... ....1....
.....1... .....1... .....1... /.....1... .....1... .....1... /.....1... .....1... .....1...
......1.. ......1.. ......1.. /......1.. ......1.. ......1.. /......1.. ......1.. ......1..
.......1. .......1. .......1. /.......1. .......1. .......1. /.......1. .......1. .......1.
........1 ........1 ........1 /........1 ........1 ........1 /........1 ........1 ........1
111...... 111...... 111...... /......... ......... ......... /......... ......... .........
...111... ...111... ...111... /......... ......... ......... /......... ......... .........
......111 ......111 ......111 /......... ......... ......... /......... ......... .........
......... ......... ......... /111...... 111...... 111...... /......... ......... .........
......... ......... ......... /...111... ...111... ...111... /......... ......... .........
......... ......... ......... /......111 ......111 ......111 /......... ......... .........
......... ......... ......... /......... ......... ......... /111...... 111...... 111......
......... ......... ......... /......... ......... ......... /...111... ...111... ...111...
......... ......... ......... /......... ......... ......... /......111 ......111 ......111
</code></pre></small>
</li>
</ol>



<h3 id="head_bg_LightBlue">(3)&nbsp;Bit representation functions</h3>
<ol>
<li>Bit representation generation function<br>
    In the analysis algorithm, the state of the entire board and the state of a group of cells
    such as ALS are expressed as a single variable expressed in bits.
<pre class="line-numbers" class="prismOp">
<code class="language-csharp">List&lt;UCell&gt; UCellLst;
UInt128 bitExp    = UCellLst.Aggregate(UInt128.Zero, (p,q) => p | qOne&lt;&lt;q.rc );
UInt128 Connected = UCellLst.Aggregate(UInt128.Zero, (p,q) => p | pConnectedCells81[q.rc] );
</code></pre>
</li>

<li>Bit representation enumeration functions<br>
    Enumerates the position of the value "1" = original value from bit representation variables.
    <ul>
        <li>"IEGet_BtoNo()" is a 9-bit variable enumeration function</li>
        <li>"IEGet_BtoHouse27()" is a 27-bit variable enumeration function</li>
        <li>"IEGet_rc()" is an enumeration function for 128 (81) bit variables</li>
    </ul>
<small><pre class="line-numbers" class="prismOp">
<code class="language-csharp">static public IEnumerable&lt;int&gt;> IEGet_BtoNo( this int B, int sz=9 ){
    for(int no=0; no&lt;sz; no++ ){ if((B & (1&lt;&lt;no) )>0)  yield return no; }
    yield break;
}

static public IEnumerable<int> IEGet_BtoHouse27( this int P ){
    for(int m=0; m&lt;27; m++ ){ if( (P & (1&lt;m)) &gt; 0 )  yield return m; }
    yield break;
}

static public IEnumerable<int> IEGet_rc( this UInt128 A, int mx=81){
    for(int rc=0; rc&lt;mx; rc++){
        if( (A & (UInt128.One&lt;&lt;rc)) &gt; 0  ) yield return rc;
    }
    yield break;
}
</code></pre></small>
</li>
</ol>




<h3 id="head_bg_LightBlue"> (4)&nbsp;rcbFrame</h3>
<p>
    These are functions that represent rows, columns, and blocks of Sudoku cells, and aggregate functions.<br>
    Used in algorithms that handle multiple cells (such as ALS) to examine the common parts and coverage status of a group of cells.<br>
<pre class="line-numbers" class="prismOp" >
<code class="language-csharp">static public class ULogical_Node_Utility (only some){
    static public int func_rcbFrame_Value( this int rc) => (1&lt;&lt;(rc.ToBlock()+18)) | (1&lt;&lt;(rc%9+9)) | (1&lt;&lt;rc/9);
    static public int rcbFrame_Value( this int rc) => _rcbFrame_Value[rc];
    static public int Ceate_rcbFrameAnd( this UInt128 b081 )  => b081.IEGet_rc().Aggregate( 0x7FFFFFF, (p,q) => p & rcbFrame_Value(q) );
    static public int Ceate_rcbFrameOr( this UInt128 b081 )   => b081.IEGet_rc().Aggregate( 0, (p,q) => p | rcbFrame_Value(q) );
    static public UInt128 AggregateCommonAxis( this UInt128 B) => B.IEGet_rc().Aggregate( (UInt128.One&lt;&lt;81)-1, (b,rc)=>b & pConnectedCells81[rc] );
}
</code></pre>	<br><br>

</p>
        </section>
    </article>

    <a href="#" class="pagetop">Top</a>
<footer id="foot">
    <p id="copyright">Copyright &copy; 2014- GNPX. All rights reserved.</p>
</footer>

</body>
</html>
